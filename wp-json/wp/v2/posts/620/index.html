{"id":620,"date":"2021-03-21T17:09:17","date_gmt":"2021-03-21T09:09:17","guid":{"rendered":"http:\/\/www.767.com\/wp\/?p=620"},"modified":"2022-09-25T17:58:44","modified_gmt":"2022-09-25T09:58:44","slug":"python%e4%b8%8b%e8%bd%bdurl%e5%9b%be%e7%89%87","status":"publish","type":"post","link":"http:\/\/sueehu.tk\/wp\/620.html","title":{"rendered":"<a href=\"https:\/\/www.jianshu.com\/p\/546a0c1d89e7\" target=\"_blank\" rel=\"noopener\">Python\u4e0b\u8f7dURL\u56fe\u7247<\/a>"},"content":{"rendered":"<p><span style=\"font-size: 14px;\">\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93requests\uff1a<\/span><\/p>\n<div>\n<div class=\"_2Uzcx_\"><\/div>\n<\/div>\n<pre class=\"line-numbers language-python\"><code class=\"python language-python\"><span class=\"token comment\"># coding: utf8<\/span>\r\n<span class=\"token keyword\">import<\/span> requests\r\n\r\n<span class=\"token keyword\">def<\/span> <span class=\"token function\">download_img<\/span><span class=\"token punctuation\">(<\/span>img_url<span class=\"token punctuation\">,<\/span> api_token<span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">:<\/span>\r\n    <span class=\"token keyword\">print<\/span> <span class=\"token punctuation\">(<\/span>img_url<span class=\"token punctuation\">)<\/span>\r\n    header <span class=\"token operator\">=<\/span> <span class=\"token punctuation\">{<\/span><span class=\"token string\">\"Authorization\"<\/span><span class=\"token punctuation\">:<\/span> <span class=\"token string\">\"Bearer \"<\/span> <span class=\"token operator\">+<\/span> api_token<span class=\"token punctuation\">}<\/span> <span class=\"token comment\"># \u8bbe\u7f6ehttp header\uff0c\u89c6\u60c5\u51b5\u52a0\u9700\u8981\u7684\u6761\u76ee\uff0c\u8fd9\u91cc\u7684token\u662f\u7528\u6765\u9274\u6743\u7684\u4e00\u79cd\u65b9\u5f0f<\/span>\r\n    r <span class=\"token operator\">=<\/span> requests<span class=\"token punctuation\">.<\/span>get<span class=\"token punctuation\">(<\/span>img_url<span class=\"token punctuation\">,<\/span> headers<span class=\"token operator\">=<\/span>header<span class=\"token punctuation\">,<\/span> stream<span class=\"token operator\">=<\/span><span class=\"token boolean\">True<\/span><span class=\"token punctuation\">)<\/span>\r\n    <span class=\"token keyword\">print<\/span><span class=\"token punctuation\">(<\/span>r<span class=\"token punctuation\">.<\/span>status_code<span class=\"token punctuation\">)<\/span> <span class=\"token comment\"># \u8fd4\u56de\u72b6\u6001\u7801<\/span>\r\n    <span class=\"token keyword\">if<\/span> r<span class=\"token punctuation\">.<\/span>status_code <span class=\"token operator\">==<\/span> <span class=\"token number\">200<\/span><span class=\"token punctuation\">:<\/span>\r\n        <span class=\"token builtin\">open<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">'C:\\\\Users\\\\cloudoxou\\\\Desktop\\\\img.png'<\/span><span class=\"token punctuation\">,<\/span> <span class=\"token string\">'wb'<\/span><span class=\"token punctuation\">)<\/span><span class=\"token punctuation\">.<\/span>write<span class=\"token punctuation\">(<\/span>r<span class=\"token punctuation\">.<\/span>content<span class=\"token punctuation\">)<\/span> <span class=\"token comment\"># \u5c06\u5185\u5bb9\u5199\u5165\u56fe\u7247<\/span>\r\n        <span class=\"token keyword\">print<\/span><span class=\"token punctuation\">(<\/span><span class=\"token string\">\"done\"<\/span><span class=\"token punctuation\">)<\/span>\r\n    <span class=\"token keyword\">del<\/span> r\r\n\r\n<span class=\"token keyword\">if<\/span> __name__ <span class=\"token operator\">==<\/span> <span class=\"token string\">'__main__'<\/span><span class=\"token punctuation\">:<\/span>\r\n    <span class=\"token comment\"># \u4e0b\u8f7d\u8981\u7684\u56fe\u7247<\/span>\r\n    img_url <span class=\"token operator\">=<\/span> <span class=\"token string\">\"http:\/\/www.baidu.com\/some_img_url\"<\/span>\r\n    api_token <span class=\"token operator\">=<\/span> <span class=\"token string\">\"fklasjfljasdlkfjlasjflasjfljhasdljflsdjflkjsadljfljsda\"<\/span>\r\n    download_img<span class=\"token punctuation\">(<\/span>img_url<span class=\"token punctuation\">,<\/span> api_token<span class=\"token punctuation\">)<\/span><\/code><\/pre>\n<p>&nbsp;<\/p>\n<div>\n<div>\u8fd9\u91cc\u662f\u7528GET\u65b9\u6cd5\u6765\u76f4\u63a5\u8bf7\u6c42\u56fe\u7247URL\uff0cURL\u968f\u4fbf\u7f16\u7684\uff0c\u5176\u4e2d\u52a0\u4e86\u4e00\u4e2aheader\uff0c\u662f\u4e3a\u4e86\u6f14\u793a\u9700\u8981\u9274\u6743\u7684\u60c5\u51b5\uff0c\u6709\u4e9b\u7f51\u7ad9\u662f\u9700\u8981\u767b\u5f55\u624d\u80fd\u8bbf\u95ee\u7684\uff0c\u8fd9\u91cc\u7684&#8221;Authorization&#8221;: &#8220;Bearer &#8220;\u5c31\u662f\u4e00\u79cd\u9274\u6743\u65b9\u5f0f<\/div>\n<\/div>\n","protected":false},"excerpt":{"rendered":"<p>\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93requests\uff1a # coding: utf8 import re &hellip; <a href=\"http:\/\/sueehu.tk\/wp\/620.html\">\u7ee7\u7eed\u9605\u8bfb <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":"","_links_to":"","_links_to_target":""},"categories":[9],"tags":[],"_links":{"self":[{"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/posts\/620"}],"collection":[{"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/comments?post=620"}],"version-history":[{"count":1,"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/posts\/620\/revisions"}],"predecessor-version":[{"id":978,"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/posts\/620\/revisions\/978"}],"wp:attachment":[{"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/media?parent=620"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/categories?post=620"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/sueehu.tk\/wp\/wp-json\/wp\/v2\/tags?post=620"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}